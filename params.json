{
  "name": "Django-setup",
  "tagline": "Setup Django application with Nginx and uWSGI on a Ubuntu server",
  "body": "## Setup Django, Nginx and uWSGI on a Ubuntu server - Two User setup\r\n\r\n### Login to UBUNTU user\r\n\r\nssh ubuntu@ec2-54-88-129-151.compute-1.amazonaws.com\r\n\r\n#### CREATE apps USER\r\n```\r\nsudo adduser apps\r\nsudo su apps #Login to apps user and add ssh keys\r\nmkdir ~/.ssh\r\necho -e \"<SSH Key from your local machine>\" >> ~/.ssh/authorized_keys\r\nchmod 600 ~/.ssh/authorized_keys\r\nexit\r\n```\r\n\r\n#### REQUIRED PACKAGES/DEPENDENCIES\r\n```\r\nsudo apt-get update && sudo apt-get -y upgrade\r\nsudo apt-get -y install python-dev python-pip sqlite3 libsqlite3-dev nginx vim uwsgi uwsgi-plugin-python\r\nsudo pip install virtualenvwrapper\r\n```\r\n\r\n### SETUP\r\n\r\n#### NGNIX\r\n```\r\nsudo rm /etc/nginx/sites-enabled/default\r\nsudo vim /etc/nginx/sites-available/parsel_tongue_nginx.conf \r\n```\r\nCopy the [parsel_tongue_nginx.conf](https://github.com/jagadeshbabu/django-ubuntu-setup/blob/master/configs/parsel_tongue_nginx.conf) file\r\n```\r\nsudo ln -s /etc/nginx/sites-available/parsel_tongue_nginx.conf /etc/nginx/sites-enabled/parsel_tongue_nginx.conf\r\nsudo service nginx configtest\r\nsudo service nginx restart\r\n```\r\n\r\n#### APPLICATION DEPENDENCIES\r\n```\r\nsudo chown apps:www-data -R /var/log/uwsgi\r\nsudo vim /etc/uwsgi/apps-available/parsel_tongue_uwsgi.ini\r\n```\r\nCopy the [parsel_tongue_uwsgi.ini](https://github.com/jagadeshbabu/django-ubuntu-setup/blob/master/configs/parsel_tongue_uwsgi.ini) file\r\n```\r\nsudo ln -s /etc/uwsgi/apps-available/parsel_tongue_uwsgi.ini /etc/uwsgi/apps-enabled/parsel_tongue_uwsgi.ini\r\n```\r\n\r\n#### PERMISSIONS FOR UWSGI RESTART\r\n```\r\nsudo visudo (Add the following line)\r\napps ALL=(ALL) NOPASSWD: /usr/sbin/service uwsgi status, /usr/sbin/service uwsgi start, /usr/sbin/service uwsgi stop, /usr/sbin/service uwsgi restart\r\nctrl + o\r\nENTER\r\nctrl + x\r\n```\r\n\r\nexit\r\n\r\n### Login to APPS user\r\n\r\nssh apps@ec2-54-88-129-151.compute-1.amazonaws.com\r\n\r\n#### APPLICATION DEPENDENCIES\r\n```\r\necho \"export WORKON_HOME=$HOME/.virtualenvs\" >> ~/.bashrc\r\necho \"source /usr/local/bin/virtualenvwrapper.sh\" >> ~/.bashrc\r\nsource ~/.bashrc\r\n```\r\n\r\n##### Django Application Setup\r\n```\r\nmkvirtualenv parsel_tongue\r\npip install django\r\ndjango-admin startproject parsel_tongue\r\ncd parsel_tongue\r\necho -e 'STATIC_ROOT = os.path.join(BASE_DIR, \"static/\")' >> parsel_tongue/settings.py\r\npython manage.py collectstatic\r\npython manage.py migrate\r\npython manage.py createsuperuser\r\ndeactivate\r\n```\r\n\r\n##### Restart Services\r\n```\r\nsudo service uwsgi start\r\n```\r\nexit\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}